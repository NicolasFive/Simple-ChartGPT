import{_ as B}from"./nuxt-link.892bd1c3.js";import{ba as I,f as N,aN as T,ai as z,i as U,L,b1 as q,q as a,z as k,k as V,bb as D,bc as E,ah as j,J,o as Y,c as G,w as r,x as g,b8 as H,u as s,a5 as y,a7 as C,ac as K,t as P}from"./entry.92238b29.js";import{d as O}from"./user.9b40c3bf.js";import{u as Q,a as x}from"./vee-validate.esm.43869241.js";import{_ as W}from"./_plugin-vue_export-helper.c27b6911.js";import{b as X,u as Z,c as M,w as ee,e as se,x as oe,f as ae,g as te,h,V as re}from"./VTextField.34c7c77b.js";import{m as ne,V as $}from"./VCheckboxBtn.68c9faee.js";const le=()=>I().$cookies;const ue=N()({name:"VCheckbox",inheritAttrs:!1,props:{...X(),...T(ne(),["inline"])},emits:{"update:focused":l=>!0},setup(l,f){let{attrs:n,slots:b}=f;const{isFocused:w,focus:i,blur:d}=Z(l),m=z(),u=U(()=>l.id||`checkbox-${m}`);return L(()=>{const[p,_]=q(n),[o,e]=M.filterProps(l),[c,t]=$.filterProps(l);return a(M,k({class:["v-checkbox",l.class]},p,o,{id:u.value,focused:w.value,style:l.style}),{...b,default:v=>{let{id:F,messagesId:R,isDisabled:S,isReadonly:A}=v;return a($,k(c,{id:F.value,"aria-describedby":R.value,disabled:S.value,readonly:A.value},_,{onFocus:i,onBlur:d}),b)}})}),{}}});const ie={__name:"login",setup(l){const f=V(null),n=V("phone"),{handleSubmit:b,handleReset:w}=Q({validationSchema:{phone(o){return n.value!="phone"||(o==null?void 0:o.length)>0?!0:"Must input phone number."},email(o){return n.value!="email"||/^[a-z.-]+@[a-z.-]+\.[a-z]+$/i.test(o)||/^admin$/i.test(o)?!0:"Must be a valid e-mail."},password(o){return(o==null?void 0:o.length)>=6?!0:"Password needs to be at least 6 digits."}}}),i=x("phone"),d=x("email"),m=x("password"),u=V(!1),p=V(!1),_=b(async o=>{const{error:e}=await O(o);if(e.value)throw new Error("Login Failed.");{const c=D(),v=E().query.forwardTo;c.push({path:v||"/"})}});return j(()=>{J(n,()=>{f.value.reset()})}),le(),(o,e)=>{const c=B;return Y(),G(ee,null,{default:r(()=>[a(re,{justify:"center"},{default:r(()=>[a(se,{class:"card-body"},{default:r(()=>[a(oe,{class:"card-title"},{default:r(()=>[g(" Login ")]),_:1}),a(ae,null,{default:r(()=>[a(te,{ref_key:"form",ref:f,onSubmit:H(s(_),["prevent"])},{default:r(()=>[y(a(h,{modelValue:s(i).value.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s(i).value.value=t),counter:50,label:"Phone Number.","error-messages":s(i).errorMessage.value,"append-icon":"mdi-email","onClick:append":e[1]||(e[1]=t=>n.value="email")},null,8,["modelValue","error-messages"]),[[C,s(n)=="phone"]]),y(a(h,{modelValue:s(d).value.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s(d).value.value=t),counter:100,label:"Email Address.","error-messages":s(d).errorMessage.value,"append-icon":"mdi-phone","onClick:append":e[3]||(e[3]=t=>n.value="phone")},null,8,["modelValue","error-messages"]),[[C,s(n)=="email"]]),a(h,{modelValue:s(m).value.value,"onUpdate:modelValue":e[4]||(e[4]=t=>s(m).value.value=t),"append-icon":s(u)?"mdi-eye":"mdi-eye-off",type:s(u)?"text":"password",label:"Your Password.",counter:50,"onClick:append":e[5]||(e[5]=t=>u.value=!s(u)),"error-messages":s(m).errorMessage.value},null,8,["modelValue","append-icon","type","error-messages"]),a(ue,{modelValue:s(p),"onUpdate:modelValue":e[6]||(e[6]=t=>K(p)?p.value=t:null),label:"Remember Me."},{append:r(()=>[a(c,{to:"/register"},{default:r(()=>[a(P,{variant:"text",size:"small",ripple:!1,active:!1},{default:r(()=>[g("register now ")]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(P,{color:"success",block:"",type:"submit"},{default:r(()=>[g(" SignIn ")]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Ve=W(ie,[["__scopeId","data-v-6764ef2f"]]);export{Ve as default};
